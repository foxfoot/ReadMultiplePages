Use Promise and Promise.all to read all pages.

Use Promose to wrap callback functions.